(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3937266"],{"156e":function(e,a,l){},"2a06":function(e,a,l){"use strict";var t=function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("div",{staticClass:"dynamic-form"},[l("el-form",{ref:"configFormRef",attrs:{model:e.configForm,"label-width":"auto"}},e._l(e.options_,(function(a,t){return l("div",{key:t},["el-inline"!==a.type&&"flag"!==a.type?l("el-form-item",{attrs:{label:a.label,prop:a.name,rules:[{required:a.required,message:"请输入"+a.label,trigger:"blur"}]}},["el-input-text"==a.type?l("el-input",{attrs:{type:"text",size:"small",placeholder:a.placeholder,clearable:"",maxlength:"100"},on:{change:function(l){return e.changed(l,a.name,"")}},model:{value:e.configForm[a.name],callback:function(l){e.$set(e.configForm,a.name,"string"===typeof l?l.trim():l)},expression:"configForm[item.name]"}}):e._e(),"el-input-number"==a.type?l("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small","controls-position":"right",placeholder:a.placeholder},on:{change:function(l){return e.changed(l,a.name,"")}},model:{value:e.configForm[a.name],callback:function(l){e.$set(e.configForm,a.name,"string"===typeof l?l.trim():l)},expression:"configForm[item.name]"}}):e._e(),"el-select"===a.type?l("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",placeholder:a.placeholder},on:{change:function(l){return e.changed(l,a.name,"")}},model:{value:e.configForm[a.name],callback:function(l){e.$set(e.configForm,a.name,l)},expression:"configForm[item.name]"}},e._l(a.selectOptions,(function(e){return l("el-option",{key:e.name,attrs:{label:e.label,value:e.value}})})),1):e._e()],1):e._e(),"el-inline"===a.type?l("el-row",{key:a.name,attrs:{gutter:10}},e._l(a.children,(function(t){return l("el-col",{key:t.name,attrs:{span:e.calcSpan(a.children)}},[l("el-form-item",{attrs:{label:t.label,prop:a.name+"."+t.name,rules:[{required:t.required,message:"请输入"+t.label,trigger:"blur"}]}},["el-input-text"==t.type?l("el-input",{attrs:{size:"small",clearable:"",placeholder:t.placeholder},on:{change:function(l){return e.changed(l,a.name,t.name)}},model:{value:e.configForm[a.name][t.name],callback:function(l){e.$set(e.configForm[a.name],t.name,l)},expression:"configForm[item.name][childrenItem.name]"}}):e._e(),"el-input-number"==t.type?l("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small","controls-position":"right",clearable:"",placeholder:t.placeholder},on:{change:function(l){return e.changed(l,a.name,t.name)}},model:{value:e.configForm[a.name][t.name],callback:function(l){e.$set(e.configForm[a.name],t.name,l)},expression:"configForm[item.name][childrenItem.name]"}}):e._e(),"el-select"==t.type?l("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",placeholder:t.placeholder},on:{change:function(l){return e.changed(l,a.name,t.name)}},model:{value:e.configForm[a.name][t.name],callback:function(l){e.$set(e.configForm[a.name],t.name,l)},expression:"configForm[item.name][childrenItem.name]"}},e._l(t.selectOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1)],1)})),1):e._e(),"dynamicParams"==a.type?l("dynamic-params",{ref:"dynamicParamsRef",refInFor:!0,attrs:{dynparams:a,name:a.name},on:{childChanged:function(a,l){return e.dynamicParamsChanged(a,l)}},model:{value:e.configForm[a.name],callback:function(l){e.$set(e.configForm,a.name,l)},expression:"configForm[item.name]"}}):e._e()],1)})),0)],1)},r=[],n=(l("d3b7"),l("159b"),l("b0c0"),l("e9c4"),l("cea3")),i=function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("div",{staticClass:"dynamic-params"},[l("el-form",{ref:"dynParFormRef",attrs:{"label-position":"left","label-width":"auto",model:e.registerParams}},[l("el-row",{attrs:{gutter:10}},e._l(e.dynparams.children,(function(a,t){return l("el-col",{key:t,attrs:{span:6}},[l("el-form-item",{attrs:{label:a.label,prop:a.name,rules:[{required:a.required,message:"请输入"+a.label,trigger:"blur"}]}},["el-input-text"==a.type?l("el-input",{attrs:{type:"text",size:"small",placeholder:a.placeholder,clearable:""},on:{change:function(l){return e.changed(l,a.name)}},model:{value:e.registerParams[a.name],callback:function(l){e.$set(e.registerParams,a.name,"string"===typeof l?l.trim():l)},expression:"registerParams[item.name]"}}):e._e(),"el-input-number"==a.type?l("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small","controls-position":"right",placeholder:a.placeholder},on:{change:function(l){return e.changed(l,a.name)}},model:{value:e.registerParams[a.name],callback:function(l){e.$set(e.registerParams,a.name,"string"===typeof l?l.trim():l)},expression:"registerParams[item.name]"}}):e._e()],1)],1)})),1)],1),e._l(e.moreRegisterParams,(function(a,t){return l("el-row",{key:t,attrs:{gutter:10}},[e._l(e.dynparams.children,(function(r,n){return l("el-col",{key:n,attrs:{span:3==n?5:6}},[l("el-form-item",{attrs:{label:r.label}},["el-input-text"==r.type?l("el-input",{attrs:{size:"small",clearable:"",type:"text",placeholder:r.placeholder},on:{change:function(a){return e.changedMore(a,t,r.name)}},model:{value:a[r.name],callback:function(l){e.$set(a,r.name,"string"===typeof l?l.trim():l)},expression:"item[childrenItem.name]"}}):e._e(),"el-input-number"==r.type?l("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small","controls-position":"right",placeholder:r.placeholder},on:{change:function(a){return e.changedMore(a,t,r.name)}},model:{value:a[r.name],callback:function(l){e.$set(a,r.name,"string"===typeof l?l.trim():l)},expression:"item[childrenItem.name]"}}):e._e()],1)],1)})),l("el-col",{staticClass:"delete-icon",attrs:{span:1}},[l("i",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:function(l){return e.deleteRegisterParams(a,t)}}})])],2)})),l("div",{staticClass:"row-center-center"},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addRegisterParams}},[e._v(" 增加参数 ")])],1)],2)},u=[],o=l("2909"),c=l("5530");l("a434"),l("53ca"),l("ac1f"),l("00b4"),l("5319"),l("4d63"),l("2c3e"),l("25f0"),l("4d90"),l("1276"),l("b64b");function s(e){return!("number"===typeof e&&!isNaN(e))&&(!e||Object.keys(e).length<1)}function m(e){var a,l=p(e);if("array"===l)a=[];else{if("object"!==l)return e;a={}}if("array"===l)for(var t=0,r=e.length;t<r;t++)e[t]=function(){return e[t],e[t]}(),e[t]&&delete e[t].$parent,a.push(m(e[t]));else if("object"===l)for(var n in e)e&&delete e.$parent,a[n]=m(e[n]);return a}function p(e){var a=Object.prototype.toString,l={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return e instanceof Element?"element":l[a.call(e)]}var d={name:"DynamicParams",props:{dynparams:{type:Object,required:!0},name:{type:String,required:!0}},data:function(){return{registerParams:{},moreRegisterParams:[],moreDynparams:[],result:[],saveDisable:!0}},watch:{dynparams:function(){this.setDefaultValue()}},created:function(){this.setDefaultValue()},methods:{setDefaultValue:function(){var e=this;this.registerParams={},this.moreRegisterParams=[],this.moreDynparams=[],this.result=[],this.dynparams.children&&this.dynparams.children.length>0&&(this.dynparams.children.forEach((function(a,l){var t=a;"[object Object]"===Object.prototype.toString.call(t)&&(e.registerParams[a.name]=m(a.value))})),this.registerParams=Object.assign({},this.registerParams),this.result.unshift(this.registerParams)),this.$emit("childChanged",this.name,this.result)},addRegisterParams:function(){var e=Object(c["a"])({},this.registerParams);this.moreRegisterParams.push(e)},deleteRegisterParams:function(e,a){this.moreRegisterParams.splice(a,1)},changed:function(e,a){this.$set(this.registerParams,a,e),this.echoData()},changedMore:function(){this.echoData()},echoData:function(){this.result=Object(o["a"])(this.moreRegisterParams),this.result.unshift(this.registerParams),this.$emit("childChanged",this.name,this.result)}}},h=d,b=(l("e88a"),l("2877")),y=Object(b["a"])(h,i,u,!1,null,"64612178",null),f=y.exports,g={name:"DynamicForm",components:{dynamicParams:f},props:{options:{type:Array,required:!0}},data:function(){return{configForm:{},options_:[],tcpConfig:[],rtuConfig:[]}},watch:{options:function(){this.options_=this.options},options_:function(){this.setDefaultValue()}},created:function(){this.options_=this.options,this.initModbus()},methods:{setDefaultValue:function(){var e=this;this.configForm={},this.options_&&this.options_.length>0&&(this.options_.forEach((function(a,l){var t=a;a.children?(e.configForm[a.name]={},a.children.forEach((function(l,t){e.configForm[a.name][l.name]=l.value}))):"[object Object]"===Object.prototype.toString.call(t)&&(e.configForm[a.name]=m(a.value))})),this.configForm=Object.assign({},this.configForm))},initModbus:function(){this.tcpConfig=n["a"]["TCP"],this.rtuConfig=n["a"]["RTU"]},validateForm:function(){var e=this,a=null;return this.$refs.configFormRef.validate((function(l){l?(e.$emit("onChanged",e.configForm),a=!0):a=!1})),a},dynamicParamsChanged:function(e,a){this.configForm[e]=JSON.parse(JSON.stringify(a))},calcSpan:function(e){var a=24;switch(e.length){case 2:a=12;break;case 3:a=8;break;case 4:a=6;break;default:a=24}return a},changed:function(e,a,l){"TCP"===e?(this.options_=this.tcpConfig,this.options_[0].value="TCP"):"RTU"===e&&(this.options_=this.rtuConfig,this.options_[0].value="RTU"),s(l)?this.configForm[a]=e:this.configForm[a][l]=e}}},v=g,q=(l("84ad"),Object(b["a"])(v,t,r,!1,null,"278060e8",null));a["a"]=q.exports},"84ad":function(e,a,l){"use strict";l("a428")},a428:function(e,a,l){},cea3:function(e,a,l){"use strict";var t={NATS_SERVER:[{type:"el-input-text",name:"host",label:"服务地址",value:"127.0.0.1",required:!0,placeholder:"127.0.0.1"},{type:"el-input-number",name:"port",label:"服务端口",value:4222,required:!0,placeholder:"4222"},{type:"el-input-text",name:"user",label:"用户名称",value:"rulex",required:!0,placeholder:"rulex"},{type:"el-input-text",name:"password",label:"用户密码",value:"",required:!0,placeholder:""},{type:"el-input-text",name:"topic",label:"订阅主题",value:"rulex",required:!0,placeholder:"rulex"}],SIEMENS_S7:[{type:"el-input-text",name:"host",label:"服务地址",value:"127.0.0.1:1502",required:!0,placeholder:"127.0.0.1:1502"},{type:"el-input-number",name:"rack",label:"机架编号",value:0,required:!0,placeholder:"0"},{type:"el-input-number",name:"slot",label:"插槽编号",value:1,required:!0,placeholder:"1"},{type:"el-input-text",name:"model",label:"型号选择",value:"S7-200",required:!0,placeholder:"S7-200"},{type:"el-input-number",name:"timeout",label:"超时时间",value:10,required:!0,placeholder:"10"},{type:"el-input-number",name:"idleTimeout",label:"心跳时间",value:60,required:!0,placeholder:"60"},{type:"el-input-number",name:"frequency",label:"采集频率",value:5,required:!0,placeholder:"5"},{type:"dynamicParams",label:"DB配置",name:"dbs",required:!0,children:[{type:"el-input-text",name:"tag",label:"数据标签",value:"A",required:!0,placeholder:"A"},{type:"el-input-number",name:"address",label:"地址编号",value:0,required:!0,placeholder:"0"},{type:"el-input-number",name:"start",label:"起始地址",value:1,required:!0,placeholder:"1"},{type:"el-input-number",name:"size",label:"读取数量",value:1,required:!0,placeholder:"1"}]},{type:"flag",name:"isDynamic",label:"是否动态",value:"1",required:!1,placeholder:"1"}],MQTT:[{type:"el-input-text",name:"host",label:"主机地址",value:"127.0.0.1",required:!0,placeholder:"127.0.0.1"},{type:"el-input-number",name:"port",label:"服务端口",value:1883,required:!0,placeholder:"1883"},{type:"el-input-text",name:"topic",label:"订阅主题",value:"rulex-data-1",required:!0,placeholder:"rulex-data-1"},{type:"el-input-text",name:"clientId",label:"客户端ID",value:"rulex-1",required:!0,placeholder:"rulex-1"},{type:"el-input-text",name:"username",value:"rulex-1",label:"用  户",required:!0,placeholder:"rulex-1"},{type:"el-input-text",name:"password",label:"密  码",value:"",required:!0,placeholder:"rulex-1"},{type:"flag",name:"isDynamic",label:"是否动态",value:"0",required:!1,placeholder:"0"}],HTTP:[{type:"el-input-number",name:"port",label:"服务端口",value:2581,required:!0,placeholder:"2581"},{type:"flag",name:"isDynamic",label:"是否动态",value:"0",required:!1,placeholder:"0"}],RULEX_UDP:[{type:"el-input-text",name:"host",label:"服务地址",value:"127.0.0.1",required:!0,placeholder:"127.0.0.1"},{type:"el-input-number",name:"port",label:"服务端口",value:2582,required:!0,placeholder:"2582"},{type:"el-input-number",name:"maxDataLength",label:"最大包长",value:1024,required:!0,placeholder:"1024"},{type:"flag",name:"isDynamic",label:"是否动态",value:"0",required:!1,placeholder:"0"}],COAP:[{type:"el-input-number",name:"port",label:"服务端口",placeholder:"2583",required:!0,value:2583},{type:"flag",name:"isDynamic",label:"是否动态",value:"0",required:!1,placeholder:"0"}],GRPC:[{type:"el-input-number",name:"port",label:"服务端口",value:2584,required:!0,placeholder:"2584"},{type:"flag",name:"isDynamic",label:"是否动态",value:"0",required:!1,placeholder:"0"}],UART_MODULE:[{type:"el-input-text",name:"address",label:"串口名称",value:"/dev/ttyS1",required:!0,placeholder:"/dev/ttyS1"},{type:"el-input-number",name:"baudRate",label:"波特率",value:115200,required:!0,placeholder:"115200"},{type:"el-input-number",name:"timeout",label:"超时时长",value:5,required:!0,placeholder:"5"},{type:"el-input-number",name:"dataBits",label:"数据位",value:8,required:!0,placeholder:"8"},{type:"el-select",name:"parity",label:"奇偶校验",value:"N",required:!0,placeholder:"请选择",selectOptions:[{value:"N",label:"无校验"},{value:"E",label:"偶校验"},{value:"O",label:"奇校验"}]},{type:"el-input-number",name:"stopBits",label:"停止位",value:1,required:!0,placeholder:"1"},{type:"flag",name:"isDynamic",label:"是否动态",value:"0",required:!1,placeholder:"0"}],MODBUS_MASTER:[{type:"el-select",name:"mode",label:"工作模式",value:"",required:!0,placeholder:"请选择",selectOptions:[{value:"TCP",label:"TCP"},{value:"RTU",label:"RTU"}]},{type:"flag",name:"isDynamic",label:"是否动态",value:"0",required:!1,placeholder:"0"}],SNMP_SERVER:[{type:"el-input-number",name:"frequency",label:"采集频率",value:5,required:!0,placeholder:"5"},{type:"el-input-number",name:"timeout",label:"超时时长",value:5,required:!0,placeholder:"5"},{type:"el-inline",label:"目标配置",name:"targets",children:[{type:"el-input-text",name:"target",label:"主机地址",value:"127.0.0.1",required:!0,placeholder:"127.0.0.1"},{type:"el-input-number",name:"port",label:"主机端口",value:1161,required:!0,placeholder:"1161"},{type:"el-select",name:"transport",label:"传输模式",value:"udp",required:!0,placeholder:"udp",selectOptions:[{value:"udp",label:"UDP"}]},{type:"el-input-text",name:"community",label:"社区名称",value:"public",required:!0,placeholder:"public"},{type:"el-input-number",name:"version",label:"协议版本",value:3,required:!0,placeholder:"3"},{type:"el-input-text",name:"dataModels",label:"数据模型",value:"",required:!0,placeholder:""}]},{type:"flag",name:"isDynamic",label:"是否动态",value:"0",required:!1,placeholder:"0"}],TCP:[{type:"el-select",name:"mode",label:"工作模式",value:"TCP",required:!0,placeholder:"请选择",selectOptions:[{value:"TCP",label:"TCP"},{value:"RTU",label:"RTU"}]},{type:"el-input-number",name:"timeout",label:"超时时长",value:5,required:!0,placeholder:"5"},{type:"el-input-number",name:"slaverId",label:"从机地址",value:1,required:!0,placeholder:"1"},{type:"el-input-number",name:"frequency",label:"采集频率",value:5,required:!0,placeholder:"5"},{type:"el-inline",label:"TCP配置",name:"config",children:[{type:"el-input-text",name:"ip",label:"采集地址",value:"127.0.0.1",required:!0,placeholder:"127.0.0.1"},{type:"el-input-number",name:"port",label:"采集端口",value:1254,required:!0,placeholder:"1254"}]},{type:"dynamicParams",label:"寄存器配置",name:"registerParams",required:!1,children:[{type:"el-input-text",name:"tag",label:"数据标签",value:"A",required:!0,placeholder:"A"},{type:"el-input-number",name:"function",label:"功能代码",value:1,required:!0,placeholder:"1"},{type:"el-input-number",name:"address",label:"起始地址",value:0,required:!0,placeholder:"0"},{type:"el-input-number",name:"quantity",label:"读取数量",value:10,required:!0,placeholder:"10"}]},{type:"flag",name:"isDynamic",label:"是否动态",value:"1",required:!1,placeholder:"1"}],RTU:[{type:"el-select",name:"mode",label:"工作模式",value:"RTU",required:!0,placeholder:"请选择",selectOptions:[{value:"TCP",label:"TCP"},{value:"RTU",label:"RTU"}]},{type:"el-input-number",name:"timeout",label:"超时时长",value:5,required:!0,placeholder:"5"},{type:"el-input-number",name:"slaverId",label:"从机地址",value:1,required:!0,placeholder:"1"},{type:"el-input-number",name:"frequency",label:"采集频率",value:5,required:!0,placeholder:"5"},{type:"el-inline",label:"配置",name:"config",children:[{type:"el-input-text",name:"uart",label:"串口名称",value:"com1",required:!0,placeholder:"com1"},{type:"el-input-number",name:"baudRate",label:"波特率",value:115200,required:!0,placeholder:"115200"},{type:"el-input-number",name:"dataBits",label:"数据位",value:8,required:!0,placeholder:"8"},{type:"el-select",name:"parity",label:"奇偶校验",value:"N",required:!0,placeholder:"请选择",selectOptions:[{value:"N",label:"无校验"},{value:"E",label:"偶校验"},{value:"O",label:"奇校验"}]},{type:"el-input-number",name:"stopBits",label:"停止位",value:1,required:!0,placeholder:"1"}]},{type:"dynamicParams",label:"寄存器配置",required:!1,name:"registerParams",children:[{type:"el-input-text",name:"tag",label:"数据标签",value:"A",required:!0,placeholder:"A"},{type:"el-input-number",name:"function",label:"Modbus 功能",value:1,required:!0,placeholder:"1"},{type:"el-input-number",name:"address",label:"起始地址",value:0,required:!0,placeholder:"0"},{type:"el-input-number",name:"quantity",label:"读取数量",value:10,required:!0,placeholder:"10"}]},{type:"flag",name:"isDynamic",label:"是否动态",value:"1",required:!1,placeholder:"1"}]};a["a"]=t},e88a:function(e,a,l){"use strict";l("156e")}}]);