(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37e24ad2"],{"2a89":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return s}));var i=a("b775");function r(){return Object(i["a"])({url:"inends",method:"get"})}function n(t){return Object(i["a"])({url:"inends",method:"post",data:t})}function s(t){return Object(i["a"])({method:"delete",url:"inends?uuid="+t})}},"6c1f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticStyle:{height:"800px",border:"1px solid #eee"}},[a("el-main",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("输入资源管理")])]),a("el-button",{attrs:{type:"primary",icon:"el-icon-help"},on:{click:function(e){t.status.createDialogVisible=!0}}},[t._v(" 新 建 ")]),a("el-button",{attrs:{type:"success",icon:"el-icon-refresh"},on:{click:t.refreshList}},[t._v(" 刷 新 ")]),a("el-dialog",{attrs:{width:"1100px",title:"新建资源",top:"10vh","close-on-click-modal":!1,visible:t.status.createDialogVisible},on:{"update:visible":function(e){return t.$set(t.status,"createDialogVisible",e)},closed:t.createDialogClosed}},[a("el-form",{ref:"createFormRef",attrs:{model:t.createForm,rules:t.createFormRules,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"资源名称",maxlength:"20",clearable:""},model:{value:t.createForm.name,callback:function(e){t.$set(t.createForm,"name",e)},expression:"createForm.name"}})],1),a("el-form-item",{attrs:{label:"资源类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"资源类型",filterable:"",clearable:""},on:{change:t.onSelectChange},model:{value:t.createForm.type,callback:function(e){t.$set(t.createForm,"type",e)},expression:"createForm.type"}},t._l(t.protocolOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.value}})})),1)],1),t.status.configFormVisible?a("el-form-item",{attrs:{label:"资源配置"}},[a("dynamic-form",{ref:"dynamicFormRef",attrs:{options:t.jsonConfig},on:{onChanged:function(e){return t.dynamicFormChanged(e)}}})],1):t._e(),a("el-form-item",{attrs:{label:"备注信息",prop:"description"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"备注信息",maxlength:"50",clearable:""},model:{value:t.createForm.description,callback:function(e){t.$set(t.createForm,"description",e)},expression:"createForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.status.createDialogVisible=!1}}},[t._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary",loading:t.status.createLoading},on:{click:t.createInEnd}},[t._v(" 提 交 ")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"uuid",label:"UUID",width:"340px"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"200px",filters:t.protocolOptions,"filter-method":t.filterHandler,"filter-placement":"bottom-end","column-key":"type"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"description",label:"信息"}}),a("el-table-column",{attrs:{prop:"state",label:"状态",filters:[{text:"正常",value:1},{text:"异常",value:0}],"filter-method":t.filterState,width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.state?a("el-tag",{attrs:{type:"success"}},[t._v("正常")]):a("el-tag",{attrs:{type:"danger"}},[t._v("异常")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.details(e.row)}}},[t._v(" 详情 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.removeInEnd(e.row)}}},[t._v(" 删除 ")])]}}])})],1),a("el-dialog",{attrs:{title:"输出目标详情",visible:t.status.detailDialogVisible,width:"1000px"},on:{"update:visible":function(e){return t.$set(t.status,"detailDialogVisible",e)}}},[a("el-descriptions",{attrs:{border:"",column:1,"label-style":t.LS}},[a("el-descriptions-item",{attrs:{label:"type"}},[a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.inEndDetail.type))])],1),a("el-descriptions-item",{attrs:{label:"name",span:2}},[t._v(" "+t._s(t.inEndDetail.name)+" ")]),t._l(t.inEndDetail.config,(function(e,i){return a("el-descriptions-item",{key:i,attrs:{label:i}},[t._v(" "+t._s(e)+" ")])})),a("el-descriptions-item",{attrs:{label:"description"}},[t._v(" "+t._s(t.inEndDetail.description)+" ")])],2),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.status.detailDialogVisible=!1}}},[t._v(" 确 定 ")])],1)],1)],1)],1)},r=[],n=(a("e9c4"),a("b64b"),a("2a89")),s=a("5c96"),o=a("cea3"),l=a("2a06"),c={name:"InEnd",components:{DynamicForm:l["a"]},data:function(){return{LS:{width:"200px"},createForm:{type:"",name:"",description:"",config:{}},createFormRules:{type:[{required:!0,message:"输入类型",trigger:["blur","change"]}],name:[{required:!0,message:"输入名称",trigger:["blur","change"]}],description:[{required:!0,message:"输入描述",trigger:["blur","change"]}]},protocolOptions:[{text:"MQTT 协议接入",value:"MQTT"},{text:"HTTP 协议接入",value:"HTTP"},{text:"UDP 协议接入",value:"RULEX_UDP"},{text:"COAP 协议接入",value:"COAP"},{text:"GRPC 协议接入",value:"GRPC"},{text:"通用串口接入",value:"UART_MODULE"},{text:"MODBUS MASTER 模式",value:"MODBUS_MASTER"},{text:"SNMP 协议接入",value:"SNMP_SERVER"},{text:"西门子S7系列接入",value:"SIEMENS_S7"},{text:"NATS 总线接入",value:"NATS_SERVER"}],jsonConfig:[],tableData:[],inEndDetail:{},protocol:"",status:{createLoading:!1,createDialogVisible:!1,detailDialogVisible:!1,configFormVisible:!1}}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(n["b"])().then((function(e){t.tableData=e.data}))},onSelectChange:function(t){this.isEmpty(t)?(this.protocol="",this.jsonConfig=[],this.status.configFormVisible=!1):(this.protocol=t,this.jsonConfig=o["a"][t],this.status.configFormVisible=!0)},createDialogClosed:function(){this.status.configFormVisible=!1,this.status.createLoading=!1,this.$refs.createFormRef.resetFields(),this.createForm=this.$options.data().createForm},dynamicFormChanged:function(t){this.createForm.config=JSON.parse(JSON.stringify(t))},createInEnd:function(){var t=this;this.$refs.createFormRef.validate((function(e){if(e){var a=t.$refs.dynamicFormRef.validateForm();if(a){var i=JSON.parse(JSON.stringify(t.createForm));return t.status.createLoading=!0,Object(n["a"])(i).then((function(e){Object(s["Message"])({message:"创建成功",type:"success",duration:5e3}),t.getList(),t.status.createDialogVisible=!1})).catch((function(){t.status.createLoading=!1})),!0}return!1}return!1}))},filterHandler:function(t,e){return e.type===t},filterState:function(t,e){return e.state===t},refreshList:function(){this.getList(),Object(s["Message"])({message:"刷新成功",type:"success",duration:5e3})},details:function(t){this.inEndDetail=t,this.status.detailDialogVisible=!0},removeInEnd:function(t){var e=this;Object(n["c"])(t.uuid).then((function(t){Object(s["Message"])({message:t.msg,type:"success",duration:5e3}),e.getList()}))},isEmpty:function(t){return!("number"===typeof t&&!isNaN(t))&&(!t||Object.keys(t).length<1)}}},u=c,d=a("2877"),p=Object(d["a"])(u,i,r,!1,null,"1666eafe",null);e["default"]=p.exports}}]);